(function(){"use strict";var t={3271:function(t,a,e){var n=e(5130),i=e(6768),s=e(4232);const r={id:"app"},o={class:"container",style:{"margin-left":"270px"}},l=(0,i.Lk)("h1",null,"Music Streamer",-1),u={key:1,id:"nav-list",class:"list-group"},c=["onClick"],d={key:2,id:"songs-list",class:"list-group"},h=["onClick"],m=(0,i.Lk)("br",null,null,-1);function p(t,a,e,p,g,y){const f=(0,i.g2)("NavSidebar"),v=(0,i.g2)("AudioPlayer");return(0,i.uX)(),(0,i.CE)("div",r,[(0,i.bF)(f,{onNavigate:y.navigate},null,8,["onNavigate"]),(0,i.Lk)("div",o,[l,g.navigationHistory.length?((0,i.uX)(),(0,i.CE)("button",{key:0,onClick:a[0]||(a[0]=(...t)=>y.goBack&&y.goBack(...t)),class:"btn btn-secondary mb-3"},"Back")):(0,i.Q3)("",!0),"all"!==g.currentView?((0,i.uX)(),(0,i.CE)("ul",u,[((0,i.uX)(!0),(0,i.CE)(i.FK,null,(0,i.pI)(g.displayItems,(t=>((0,i.uX)(),(0,i.CE)("li",{key:t.name,class:"list-group-item"},[(0,i.Lk)("a",{href:"#",onClick:(0,n.D$)((a=>y.handleNavigation(t)),["prevent"]),class:"nav-link"},(0,s.v_)(t.name),9,c)])))),128))])):((0,i.uX)(),(0,i.CE)("ul",d,[((0,i.uX)(!0),(0,i.CE)(i.FK,null,(0,i.pI)(g.songs,(t=>((0,i.uX)(),(0,i.CE)("li",{key:t.index,class:"list-group-item"},[(0,i.Lk)("a",{href:"#",onClick:(0,n.D$)((a=>y.playSong(t.index)),["prevent"]),class:"play-song"},(0,s.v_)(t.name),9,h),m,(0,i.Lk)("small",null,(0,s.v_)(t.path),1)])))),128))]))]),(0,i.bF)(v,{ref:"audioPlayer",audioSrc:g.audioSrc,metadata:g.metadata},null,8,["audioSrc","metadata"])])}e(4114),e(3375),e(9225),e(3972),e(9209),e(5714),e(7561),e(6197);const g={class:"nav-sidebar"},y={class:"nav flex-column"},f=["onClick"];function v(t,a,e,r,o,l){return(0,i.uX)(),(0,i.CE)("div",g,[(0,i.Lk)("ul",y,[((0,i.uX)(!0),(0,i.CE)(i.FK,null,(0,i.pI)(o.links,(t=>((0,i.uX)(),(0,i.CE)("li",{class:"nav-item",key:t.name},[(0,i.Lk)("a",{class:(0,s.C4)(["nav-link",{active:t.active}]),href:"#",onClick:(0,n.D$)((a=>l.navigate(t.name)),["prevent"])},[(0,i.Lk)("i",{class:(0,s.C4)(t.icon)},null,2),(0,i.eW)(" "+(0,s.v_)(t.name),1)],10,f)])))),128))])])}var k={data(){return{links:[{name:"All",href:"#",icon:"fas fa-list"},{name:"Artists",href:"#",icon:"fas fa-user"},{name:"Albums",href:"#",icon:"fas fa-record-vinyl"}]}},methods:{navigate(t){console.log("navigate",t),this.$emit("navigate",t)}}},b=e(1241);const A=(0,b.A)(k,[["render",v]]);var w=A;const L={class:"audio-player-container"},S={class:"audio-player"},P={class:"audio-info"},C=["src"],V={class:"track-info"},E={class:"track-title"},T={class:"track-artist"},_={class:"track-album"},X={class:"track-year"},$={class:"audio-controls"},x=["src"];function O(t,a,e,r,o,l){return(0,i.uX)(),(0,i.CE)("div",L,[(0,i.Lk)("div",S,[(0,i.Lk)("div",P,[(0,i.Lk)("img",{src:o.albumCover,alt:"Album Cover",class:"cover"},null,8,C),(0,i.Lk)("div",V,[(0,i.Lk)("span",E,(0,s.v_)(e.metadata.title),1),(0,i.Lk)("span",T,(0,s.v_)(e.metadata.artist),1),(0,i.Lk)("span",_,(0,s.v_)(e.metadata.album),1),(0,i.Lk)("span",X,(0,s.v_)(e.metadata.year),1)])]),(0,i.Lk)("div",$,[(0,i.Lk)("button",{onClick:a[0]||(a[0]=(...t)=>l.togglePlay&&l.togglePlay(...t)),class:"control-btn"},(0,s.v_)(o.isPlaying?"⏸️":"▶️"),1),(0,i.bo)((0,i.Lk)("input",{type:"range","onUpdate:modelValue":a[1]||(a[1]=t=>o.seek=t),onInput:a[2]||(a[2]=(...t)=>l.seekAudio&&l.seekAudio(...t)),max:"100"},null,544),[[n.Jo,o.seek]]),(0,i.Lk)("span",null,(0,s.v_)(o.currentTime),1),(0,i.eW)(" / "),(0,i.Lk)("span",null,(0,s.v_)(o.duration),1),(0,i.bo)((0,i.Lk)("input",{type:"range","onUpdate:modelValue":a[3]||(a[3]=t=>o.volume=t),onInput:a[4]||(a[4]=(...t)=>l.changeVolume&&l.changeVolume(...t)),max:"100"},null,544),[[n.Jo,o.volume]])])]),(0,i.Lk)("audio",{ref:"audioPlayer",src:e.audioSrc,onTimeupdate:a[5]||(a[5]=(...t)=>l.updateTime&&l.updateTime(...t)),onLoadedmetadata:a[6]||(a[6]=(...t)=>l.updateDuration&&l.updateDuration(...t)),onLoadeddata:a[7]||(a[7]=(...t)=>l.onLoadedData&&l.onLoadedData(...t)),onPlay:a[8]||(a[8]=(...t)=>l.onPlay&&l.onPlay(...t)),onError:a[9]||(a[9]=(...t)=>l.handleError&&l.handleError(...t))}," Your browser does not support the audio element. ",40,x)])}var I={props:["audioSrc","metadata"],data(){return{albumCover:"https://pbs.twimg.com/media/FPx0VtLX0AcOSK3.jpg:large",isPlaying:!1,seek:0,currentTime:"0:00",duration:"4:25",volume:100,isLoaded:!1}},watch:{audioSrc(t){if(t){const t=this.$refs.audioPlayer;this.isLoaded=!1,t.pause(),t.load(),console.log("Audio loaded!")}}},methods:{togglePlay(){const t=this.$refs.audioPlayer;t.paused&&this.isLoaded?(t.play(),this.isPlaying=!0):(t.pause(),this.isPlaying=!1)},onPlay(){this.isLoaded=!0,this.isPlaying=!0},onLoadedData(){this.isLoaded=!0,this.$refs.audioPlayer.play(),this.isPlaying=!0},updateTime(){const t=this.$refs.audioPlayer;t&&(this.currentTime=this.formatTime(t.currentTime),this.seek=t.currentTime/t.duration*100)},updateDuration(){const t=this.$refs.audioPlayer;t&&(this.duration=this.formatTime(t.duration))},formatTime(t){const a=Math.floor(t/60),e=Math.floor(t%60);return`${a}:${e<10?"0":""}${e}`},seekAudio(){const t=this.$refs.audioPlayer;t&&(t.currentTime=this.seek/100*t.duration)},changeVolume(){const t=this.$refs.audioPlayer;t&&(t.volume=this.volume/100)},handleError(t){console.error("Error loading audio:",t),alert("Failed to load audio. Please try a different song.")}}};const U=(0,b.A)(I,[["render",O]]);var M=U,j=e(7910),D={components:{NavSidebar:w,AudioPlayer:M},data(){return{songs:[],currentView:"albums",currentAlbum:null,currentArtist:null,displayItems:[],navigationHistory:[],socket:null,audioSrc:"",metadata:{title:"Unknown Title",artist:"Unknown Artist",album:"Unknown Album",year:"Unknown Year"}}},methods:{async fetchSongs(){try{const t=await fetch("http://localhost:5000/songs"),a=await t.json();this.songs=a.songs.map((t=>{const a=t.path.split("/");return{...t,artist:a[a.length-2]||"Unknown Artist",album:a[a.length-1]||"Unknown Album"}})),this.displayAlbums()}catch(t){console.error("Error fetching songs:",t)}},playSong(t){this.socket.emit("play_song",{index:t})},handlePlaySong(t){this.audioSrc=`http://localhost:5000/stream?url=${encodeURIComponent(t.url)}`,this.fetchMetadata(this.audioSrc)},async fetchMetadata(t){try{const a=await fetch(t,{method:"HEAD"});this.metadata.title=a.headers.get("X-Metadata-Title")||"Unknown Title",this.metadata.artist=a.headers.get("X-Metadata-Artist")||"Unknown Artist",this.metadata.album=a.headers.get("X-Metadata-Album")||"Unknown Album",this.metadata.year=a.headers.get("X-Metadata-Year")||"Unknown Year"}catch(a){console.error("Error fetching metadata:",a)}},displayAlbums(t=!0){t&&this.navigationHistory.push({view:this.currentView,album:this.currentAlbum,artist:this.currentArtist}),this.currentView="albums",this.currentAlbum=null,this.currentArtist=null;const a=[...new Set(this.songs.map((t=>t.album)))];this.displayItems=a.map((t=>({name:t})))},displaySongs(t,a=!0){a&&this.navigationHistory.push({view:this.currentView,album:this.currentAlbum,artist:this.currentArtist}),this.currentView="songs",this.currentAlbum=t,this.displayItems=this.songs.filter((a=>a.album===t))},displayAllSongs(){this.currentView="all",this.displayItems=this.songs},displayArtists(){this.currentView="artists",this.currentAlbum=null,this.currentArtist=null;const t=[...new Set(this.songs.map((t=>t.artist)))];this.displayItems=t.map((t=>({name:t})))},displayArtistAlbums(t,a=!0){a&&this.navigationHistory.push({view:this.currentView,album:this.currentAlbum,artist:this.currentArtist}),this.currentView="albums",this.currentArtist=t;const e=[...new Set(this.songs.filter((a=>a.artist===t)).map((t=>t.album)))];this.displayItems=e.map((t=>({name:t})))},handleNavigation(t){"albums"===this.currentView?this.displaySongs(t.name):"songs"===this.currentView?this.playSong(t.index):"artists"===this.currentView&&this.displayArtistAlbums(t.name)},goBack(){const t=this.navigationHistory.pop();t&&(this.currentView=t.view,this.currentAlbum=t.album,this.currentArtist=t.artist,"albums"===this.currentView?this.displayAlbums(!1):"songs"===this.currentView?this.displaySongs(this.currentAlbum,!1):"artists"===this.currentView&&this.displayArtists())},navigate(t){"All"===t?(this.navigationHistory=[],this.displayAllSongs()):"Artists"===t?(this.navigationHistory=[],this.displayArtists()):"Albums"===t&&(this.navigationHistory=[],this.displayAlbums())}},mounted(){this.socket=j.Ay.connect("http://localhost:5000"),this.socket.on("connect",(()=>{console.log("Connected to server")})),this.socket.on("play_song",this.handlePlaySong),this.fetchSongs()}};const H=(0,b.A)(D,[["render",p]]);var F=H;(0,n.Ef)(F).mount("#app")}},a={};function e(n){var i=a[n];if(void 0!==i)return i.exports;var s=a[n]={exports:{}};return t[n].call(s.exports,s,s.exports,e),s.exports}e.m=t,function(){var t=[];e.O=function(a,n,i,s){if(!n){var r=1/0;for(c=0;c<t.length;c++){n=t[c][0],i=t[c][1],s=t[c][2];for(var o=!0,l=0;l<n.length;l++)(!1&s||r>=s)&&Object.keys(e.O).every((function(t){return e.O[t](n[l])}))?n.splice(l--,1):(o=!1,s<r&&(r=s));if(o){t.splice(c--,1);var u=i();void 0!==u&&(a=u)}}return a}s=s||0;for(var c=t.length;c>0&&t[c-1][2]>s;c--)t[c]=t[c-1];t[c]=[n,i,s]}}(),function(){e.n=function(t){var a=t&&t.__esModule?function(){return t["default"]}:function(){return t};return e.d(a,{a:a}),a}}(),function(){e.d=function(t,a){for(var n in a)e.o(a,n)&&!e.o(t,n)&&Object.defineProperty(t,n,{enumerable:!0,get:a[n]})}}(),function(){e.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"===typeof window)return window}}()}(),function(){e.o=function(t,a){return Object.prototype.hasOwnProperty.call(t,a)}}(),function(){e.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})}}(),function(){var t={524:0};e.O.j=function(a){return 0===t[a]};var a=function(a,n){var i,s,r=n[0],o=n[1],l=n[2],u=0;if(r.some((function(a){return 0!==t[a]}))){for(i in o)e.o(o,i)&&(e.m[i]=o[i]);if(l)var c=l(e)}for(a&&a(n);u<r.length;u++)s=r[u],e.o(t,s)&&t[s]&&t[s][0](),t[s]=0;return e.O(c)},n=self["webpackChunkmusic_streamer"]=self["webpackChunkmusic_streamer"]||[];n.forEach(a.bind(null,0)),n.push=a.bind(null,n.push.bind(n))}();var n=e.O(void 0,[504],(function(){return e(3271)}));n=e.O(n)})();
//# sourceMappingURL=..\static\app.js.map