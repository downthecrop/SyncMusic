(function(){"use strict";var t={1040:function(t,a,e){var i=e(5130),s=e(6768),n=e(4232);const o={id:"app"},r={class:"container",style:{"margin-left":"270px"}},l=(0,s.Lk)("h1",null,"Music Streamer",-1),u={key:1,"aria-label":"breadcrumb"},c={class:"breadcrumb"},d=["onClick"],h={id:"nav-list",class:"list-group"},m=["onClick"],g={key:0},p={key:1,class:"border-top mt-2"};function y(t,a,e,y,v,f){const k=(0,s.g2)("notifications"),b=(0,s.g2)("NavSidebar"),w=(0,s.g2)("AudioPlayer");return(0,s.uX)(),(0,s.CE)("div",o,[(0,s.bF)(k,{position:"top right"}),(0,s.bF)(b,{onNavigate:f.navigate},null,8,["onNavigate"]),(0,s.Lk)("div",r,[l,v.navigationHistory.length>1?((0,s.uX)(),(0,s.CE)("button",{key:0,onClick:a[0]||(a[0]=(...t)=>f.goBack&&f.goBack(...t)),class:"btn btn-secondary mb-3"},"Back")):(0,s.Q3)("",!0),v.navigationHistory.length?((0,s.uX)(),(0,s.CE)("nav",u,[(0,s.Lk)("ol",c,[((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(v.navigationHistory,((t,a)=>((0,s.uX)(),(0,s.CE)("li",{class:"breadcrumb-item",key:a},[(0,s.Lk)("a",{href:"#",onClick:(0,i.D$)((t=>f.navigateToBreadcrumb(a)),["prevent"])},(0,n.v_)(t.view)+(0,n.v_)(t.name?": "+t.name:""),9,d)])))),128))])])):(0,s.Q3)("",!0),(0,s.Lk)("ul",h,[((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(v.displayItems,((t,a)=>((0,s.uX)(),(0,s.CE)("li",{key:t.name,class:"list-group-item border-0"},[(0,s.Lk)("a",{href:"#",onClick:(0,i.D$)((a=>f.handleNavigation(t)),["prevent"]),class:"nav-link"},[(0,s.Lk)("i",{class:(0,n.C4)([f.getIconClass(v.currentView),"mr-2"])},null,2),(0,s.eW)((0,n.v_)(t.name),1)],8,m),f.isSongView?((0,s.uX)(),(0,s.CE)("small",g,(0,n.v_)(t.path),1)):(0,s.Q3)("",!0),a<v.displayItems.length-1?((0,s.uX)(),(0,s.CE)("div",p)):(0,s.Q3)("",!0)])))),128))])]),(0,s.bF)(w,{ref:"audioPlayer",audioSrc:v.audioSrc,metadata:v.metadata},null,8,["audioSrc","metadata"])])}e(4114),e(3375),e(9225),e(3972),e(9209),e(5714),e(7561),e(6197);const v={class:"nav-sidebar"},f={class:"nav flex-column"},k=["onClick"];function b(t,a,e,o,r,l){return(0,s.uX)(),(0,s.CE)("div",v,[(0,s.Lk)("ul",f,[((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(r.links,(t=>((0,s.uX)(),(0,s.CE)("li",{class:"nav-item",key:t.name},[(0,s.Lk)("a",{class:(0,n.C4)(["nav-link",{active:t.active}]),href:"#",onClick:(0,i.D$)((a=>l.navigate(t.name)),["prevent"])},[(0,s.Lk)("i",{class:(0,n.C4)(t.icon)},null,2),(0,s.eW)(" "+(0,n.v_)(t.name),1)],10,k)])))),128))])])}var w={data(){return{links:[{name:"All",href:"#",icon:"fas fa-list"},{name:"Artists",href:"#",icon:"fas fa-user"},{name:"Albums",href:"#",icon:"fas fa-record-vinyl"}]}},methods:{navigate(t){console.log("navigate",t),this.$emit("navigate",t)}}},A=e(1241);const S=(0,A.A)(w,[["render",b]]);var L=S;const C={class:"audio-player-container"},P={class:"audio-player"},H={class:"audio-info"},V=["src"],E={class:"track-info"},T={class:"track-title"},_={class:"track-artist"},X={class:"track-album"},I={class:"track-year"},$={class:"audio-controls"},O=["src"];function x(t,a,e,o,r,l){return(0,s.uX)(),(0,s.CE)("div",C,[(0,s.Lk)("div",P,[(0,s.Lk)("div",H,[(0,s.Lk)("img",{src:r.albumCover,alt:"Album Cover",class:"cover"},null,8,V),(0,s.Lk)("div",E,[(0,s.Lk)("span",T,(0,n.v_)(e.metadata.title),1),(0,s.Lk)("span",_,(0,n.v_)(e.metadata.artist),1),(0,s.Lk)("span",X,(0,n.v_)(e.metadata.album),1),(0,s.Lk)("span",I,(0,n.v_)(e.metadata.year),1)])]),(0,s.Lk)("div",$,[(0,s.Lk)("button",{onClick:a[0]||(a[0]=(...t)=>l.togglePlay&&l.togglePlay(...t)),class:"control-btn"},(0,n.v_)(r.isPlaying?"⏸️":"▶️"),1),(0,s.bo)((0,s.Lk)("input",{type:"range","onUpdate:modelValue":a[1]||(a[1]=t=>r.seek=t),onInput:a[2]||(a[2]=(...t)=>l.seekAudio&&l.seekAudio(...t)),max:"100"},null,544),[[i.Jo,r.seek]]),(0,s.Lk)("span",null,(0,n.v_)(r.currentTime),1),(0,s.eW)(" / "),(0,s.Lk)("span",null,(0,n.v_)(r.duration),1),(0,s.bo)((0,s.Lk)("input",{type:"range","onUpdate:modelValue":a[3]||(a[3]=t=>r.volume=t),onInput:a[4]||(a[4]=(...t)=>l.changeVolume&&l.changeVolume(...t)),max:"100"},null,544),[[i.Jo,r.volume]])])]),(0,s.Lk)("audio",{ref:"audioPlayer",src:e.audioSrc,onTimeupdate:a[5]||(a[5]=(...t)=>l.updateTime&&l.updateTime(...t)),onLoadedmetadata:a[6]||(a[6]=(...t)=>l.updateDuration&&l.updateDuration(...t)),onLoadeddata:a[7]||(a[7]=(...t)=>l.onLoadedData&&l.onLoadedData(...t)),onPlay:a[8]||(a[8]=(...t)=>l.onPlay&&l.onPlay(...t)),onError:a[9]||(a[9]=(...t)=>l.handleError&&l.handleError(...t))}," Your browser does not support the audio element. ",40,O)])}var U={props:["audioSrc","metadata"],data(){return{albumCover:"https://pbs.twimg.com/media/FPx0VtLX0AcOSK3.jpg:large",isPlaying:!1,seek:0,currentTime:"0:00",duration:"4:25",volume:100,isLoaded:!1}},watch:{audioSrc(t){if(t){const t=this.$refs.audioPlayer;this.isLoaded=!1,t.pause(),t.load(),console.log("Audio loaded!")}}},methods:{togglePlay(){const t=this.$refs.audioPlayer;t.paused&&this.isLoaded?(t.play(),this.isPlaying=!0):(t.pause(),this.isPlaying=!1)},onPlay(){this.isLoaded=!0,this.isPlaying=!0},onLoadedData(){this.isLoaded=!0,this.$refs.audioPlayer.play(),this.isPlaying=!0},updateTime(){const t=this.$refs.audioPlayer;t&&(this.currentTime=this.formatTime(t.currentTime),this.seek=t.currentTime/t.duration*100)},updateDuration(){const t=this.$refs.audioPlayer;t&&(this.duration=this.formatTime(t.duration))},formatTime(t){const a=Math.floor(t/60),e=Math.floor(t%60);return`${a}:${e<10?"0":""}${e}`},seekAudio(){const t=this.$refs.audioPlayer;t&&(t.currentTime=this.seek/100*t.duration)},changeVolume(){const t=this.$refs.audioPlayer;t&&(t.volume=this.volume/100)},handleError(t){console.error("Error loading audio:",t)}}};const M=(0,A.A)(U,[["render",x]]);var N=M,j=e(7910),D={components:{NavSidebar:L,AudioPlayer:N},data(){return{songs:[],currentView:"songs",displayItems:[],navigationHistory:[],socket:null,audioSrc:"",metadata:{title:"Unknown Title",artist:"Unknown Artist",album:"Unknown Album",year:"Unknown Year"}}},computed:{isSongView(){return"songs"===this.currentView||"all"===this.currentView}},methods:{async fetchSongs(){try{const t=await fetch("http://localhost:5000/songs"),a=await t.json();this.songs=a.songs.map((t=>{const a=t.path.split("/"),e=t.name.replace(/\.(m4a|mp3)$/i,"");return{...t,name:e,artist:a[a.length-2]||"Unknown Artist",album:a[a.length-1]||"Unknown Album",path:t.path}})),this.displayAllSongs()}catch(t){console.error("Error fetching songs:",t)}},playSong(t){this.$notify("Attemping to play song: "+t),this.socket.emit("play_song",{index:t})},handlePlaySong(t){this.audioSrc=`http://localhost:5000/stream?url=${encodeURIComponent(t.url)}`,this.fetchMetadata(this.audioSrc)},async fetchMetadata(t){try{const a=await fetch(t,{method:"HEAD"});this.metadata.title=a.headers.get("X-Metadata-Title")||"Unknown Title",this.metadata.artist=a.headers.get("X-Metadata-Artist")||"Unknown Artist",this.metadata.album=a.headers.get("X-Metadata-Album")||"Unknown Album",this.metadata.year=a.headers.get("X-Metadata-Year")||"Unknown Year"}catch(a){console.error("Error fetching metadata:",a)}},displayAlbums(){this.currentView="albums";const t=[...new Set(this.songs.map((t=>t.album)))];this.displayItems=t.map((t=>({name:t}))),this.updateNavigationHistory({view:"Albums"})},displaySongs(t){this.currentView="songs",this.displayItems=this.songs.filter((a=>a.album===t)),this.updateNavigationHistory({view:"Songs",name:t})},displayAllSongs(){this.currentView="all",this.displayItems=this.songs.map(((t,a)=>({...t,index:a}))),this.updateNavigationHistory({view:"All Songs"})},displayArtists(){this.currentView="artists";const t=[...new Set(this.songs.map((t=>t.artist)))];this.displayItems=t.map((t=>({name:t}))),this.updateNavigationHistory({view:"Artists"})},displayArtistAlbums(t){this.currentView="albums";const a=[...new Set(this.songs.filter((a=>a.artist===t)).map((t=>t.album)))];this.displayItems=a.map((t=>({name:t}))),this.updateNavigationHistory({view:"Albums",name:t})},handleNavigation(t){"albums"===this.currentView?this.displaySongs(t.name):"songs"===this.currentView||"all"===this.currentView?this.playSong(t.index):"artists"===this.currentView&&this.displayArtistAlbums(t.name)},goBack(){if(this.navigationHistory.length>1){this.navigationHistory.pop();const t=this.navigationHistory[this.navigationHistory.length-1];this.restoreView(t.view,t.name)}},restoreView(t,a){switch(t){case"All Songs":this.displayAllSongs();break;case"Artists":this.displayArtists();break;case"Albums":a?this.displayArtistAlbums(a):this.displayAlbums();break;case"Songs":a&&(this.currentView="songs",this.displayItems=this.songs.filter((t=>t.album===a)));break}},navigate(t){this.navigationHistory=[],"All"===t?this.displayAllSongs():"Artists"===t?this.displayArtists():"Albums"===t&&this.displayAlbums()},navigateToBreadcrumb(t){this.navigationHistory=this.navigationHistory.slice(0,t+1);const a=this.navigationHistory[t];this.restoreView(a.view,a.name)},updateNavigationHistory(t){0!==this.navigationHistory.length&&this.navigationHistory[this.navigationHistory.length-1].view===t.view&&this.navigationHistory[this.navigationHistory.length-1].name===t.name||this.navigationHistory.push(t)},getIconClass(t){switch(t){case"albums":return"fas fa-folder";case"artists":return"fas fa-microphone";case"songs":case"all":return"fas fa-music";default:return"fas fa-music"}}},mounted(){this.socket=j.Ay.connect("http://localhost:5000"),this.socket.on("connect",(()=>{console.log("Connected to server")})),this.socket.on("play_song",this.handlePlaySong),this.fetchSongs()}};const F=(0,A.A)(D,[["render",y]]);var B=F,K=e(7278);const Q=(0,i.Ef)(B);Q.use(K.Ay),Q.mount("#app")}},a={};function e(i){var s=a[i];if(void 0!==s)return s.exports;var n=a[i]={exports:{}};return t[i].call(n.exports,n,n.exports,e),n.exports}e.m=t,function(){var t=[];e.O=function(a,i,s,n){if(!i){var o=1/0;for(c=0;c<t.length;c++){i=t[c][0],s=t[c][1],n=t[c][2];for(var r=!0,l=0;l<i.length;l++)(!1&n||o>=n)&&Object.keys(e.O).every((function(t){return e.O[t](i[l])}))?i.splice(l--,1):(r=!1,n<o&&(o=n));if(r){t.splice(c--,1);var u=s();void 0!==u&&(a=u)}}return a}n=n||0;for(var c=t.length;c>0&&t[c-1][2]>n;c--)t[c]=t[c-1];t[c]=[i,s,n]}}(),function(){e.n=function(t){var a=t&&t.__esModule?function(){return t["default"]}:function(){return t};return e.d(a,{a:a}),a}}(),function(){e.d=function(t,a){for(var i in a)e.o(a,i)&&!e.o(t,i)&&Object.defineProperty(t,i,{enumerable:!0,get:a[i]})}}(),function(){e.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"===typeof window)return window}}()}(),function(){e.o=function(t,a){return Object.prototype.hasOwnProperty.call(t,a)}}(),function(){e.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})}}(),function(){var t={524:0};e.O.j=function(a){return 0===t[a]};var a=function(a,i){var s,n,o=i[0],r=i[1],l=i[2],u=0;if(o.some((function(a){return 0!==t[a]}))){for(s in r)e.o(r,s)&&(e.m[s]=r[s]);if(l)var c=l(e)}for(a&&a(i);u<o.length;u++)n=o[u],e.o(t,n)&&t[n]&&t[n][0](),t[n]=0;return e.O(c)},i=self["webpackChunkmusic_streamer"]=self["webpackChunkmusic_streamer"]||[];i.forEach(a.bind(null,0)),i.push=a.bind(null,i.push.bind(i))}();var i=e.O(void 0,[504],(function(){return e(1040)}));i=e.O(i)})();
//# sourceMappingURL=..\static\app.js.map