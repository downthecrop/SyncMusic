(function(){"use strict";var t={3584:function(t,e,a){var i=a(5130),s=a(6768),n=a(4232);const o={id:"app"},r={class:"container",style:{"margin-left":"270px"}},l=(0,s.Lk)("h1",null,"Music Streamer",-1),u={key:1,"aria-label":"breadcrumb"},c={class:"breadcrumb"},d=["onClick"],h={id:"nav-list",class:"list-group"},m=["onClick"],p={key:0},g={key:1,class:"border-top mt-2"};function y(t,e,a,y,f,v){const k=(0,s.g2)("notifications"),b=(0,s.g2)("NavSidebar"),w=(0,s.g2)("AudioPlayer"),A=(0,s.g2)("PlaylistUI");return(0,s.uX)(),(0,s.CE)("div",o,[(0,s.bF)(k,{position:"top right"}),(0,s.bF)(b,{onNavigate:v.navigate},null,8,["onNavigate"]),(0,s.Lk)("div",r,[l,f.navigationHistory.length>1?((0,s.uX)(),(0,s.CE)("button",{key:0,onClick:e[0]||(e[0]=(...t)=>v.goBack&&v.goBack(...t)),class:"btn btn-secondary mb-3"},"Back")):(0,s.Q3)("",!0),f.navigationHistory.length?((0,s.uX)(),(0,s.CE)("nav",u,[(0,s.Lk)("ol",c,[((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(f.navigationHistory,((t,e)=>((0,s.uX)(),(0,s.CE)("li",{class:"breadcrumb-item",key:e},[(0,s.Lk)("a",{href:"#",onClick:(0,i.D$)((t=>v.navigateToBreadcrumb(e)),["prevent"])},(0,n.v_)(t.view)+(0,n.v_)(t.name?": "+t.name:""),9,d)])))),128))])])):(0,s.Q3)("",!0),(0,s.Lk)("ul",h,[((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(f.displayItems,((t,e)=>((0,s.uX)(),(0,s.CE)("li",{key:t.name,class:"list-group-item border-0"},[(0,s.Lk)("a",{href:"#",onClick:(0,i.D$)((e=>v.handleNavigation(t)),["prevent"]),class:"nav-link"},[(0,s.Lk)("i",{class:(0,n.C4)([v.getIconClass(f.currentView,t.isDirectory),"mr-2"])},null,2),(0,s.eW)((0,n.v_)(t.name),1)],8,m),v.isSongView?((0,s.uX)(),(0,s.CE)("small",p,(0,n.v_)(t.path),1)):(0,s.Q3)("",!0),e<f.displayItems.length-1?((0,s.uX)(),(0,s.CE)("div",g)):(0,s.Q3)("",!0)])))),128))])]),(0,s.bF)(w,{ref:"audioPlayer",audioSrc:f.audioSrc,metadata:f.metadata},null,8,["audioSrc","metadata"]),(0,s.bF)(A)])}a(4114),a(3375),a(9225),a(3972),a(9209),a(5714),a(7561),a(6197);const f={class:"nav-sidebar"},v={class:"nav flex-column"},k=["onClick"];function b(t,e,a,o,r,l){return(0,s.uX)(),(0,s.CE)("div",f,[(0,s.Lk)("ul",v,[((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(r.links,(t=>((0,s.uX)(),(0,s.CE)("li",{class:"nav-item",key:t.name},[(0,s.Lk)("a",{class:(0,n.C4)(["nav-link",{active:t.active}]),href:"#",onClick:(0,i.D$)((e=>l.navigate(t.name)),["prevent"])},[(0,s.Lk)("i",{class:(0,n.C4)(t.icon)},null,2),(0,s.eW)(" "+(0,n.v_)(t.name),1)],10,k)])))),128))])])}var w={data(){return{links:[{name:"All",href:"#",icon:"fas fa-list"},{name:"Artists",href:"#",icon:"fas fa-user"},{name:"Albums",href:"#",icon:"fas fa-record-vinyl"},{name:"Directory",href:"#",icon:"fas fa-folder"}]}},methods:{navigate(t){console.log("navigate",t),this.$emit("navigate",t)}}},A=a(1241);const L=(0,A.A)(w,[["render",b]]);var S=L;const C={class:"audio-player-container"},P={class:"audio-player"},E={class:"audio-info"},V=["src"],I={class:"track-info"},D={class:"track-title"},H={class:"track-artist"},X={class:"audio-controls"},T={class:"control-buttons"},O={class:"audio-progress"},_={class:"time"},U={class:"time"},$={class:"volume-control"},M=["src"];function j(t,e,a,o,r,l){return(0,s.uX)(),(0,s.CE)("div",C,[(0,s.Lk)("div",P,[(0,s.Lk)("div",E,[(0,s.Lk)("img",{src:r.albumCover,alt:"Album Cover",class:"cover"},null,8,V),(0,s.Lk)("div",I,[(0,s.Lk)("span",D,(0,n.v_)(a.metadata.title),1),(0,s.Lk)("span",H,(0,n.v_)(a.metadata.artist),1)])]),(0,s.Lk)("div",X,[(0,s.Lk)("div",T,[(0,s.Lk)("button",{onClick:e[0]||(e[0]=(...t)=>l.toggleShuffle&&l.toggleShuffle(...t)),class:"control-btn"},[(0,s.Lk)("i",{class:(0,n.C4)({"fas fa-random":r.isShuffle,"fas fa-backward":!r.isShuffle})},null,2)]),(0,s.Lk)("button",{onClick:e[1]||(e[1]=(...t)=>l.togglePlay&&l.togglePlay(...t)),class:"control-btn"},[(0,s.Lk)("i",{class:(0,n.C4)({"fas fa-pause":r.isPlaying,"fas fa-play":!r.isPlaying})},null,2)]),(0,s.Lk)("button",{onClick:e[2]||(e[2]=(...t)=>l.toggleRepeat&&l.toggleRepeat(...t)),class:"control-btn"},[(0,s.Lk)("i",{class:(0,n.C4)({"fas fa-redo":r.isRepeat,"fas fa-forward":!r.isRepeat})},null,2)])]),(0,s.Lk)("div",O,[(0,s.Lk)("span",_,(0,n.v_)(r.currentTime),1),(0,s.bo)((0,s.Lk)("input",{type:"range","onUpdate:modelValue":e[3]||(e[3]=t=>r.seek=t),onInput:e[4]||(e[4]=(...t)=>l.seekAudio&&l.seekAudio(...t)),class:"seek-bar"},null,544),[[i.Jo,r.seek]]),(0,s.Lk)("span",U,(0,n.v_)(r.duration),1)])]),(0,s.Lk)("div",$,[(0,s.bo)((0,s.Lk)("input",{type:"range","onUpdate:modelValue":e[5]||(e[5]=t=>r.volume=t),onInput:e[6]||(e[6]=(...t)=>l.changeVolume&&l.changeVolume(...t)),class:"volume-bar"},null,544),[[i.Jo,r.volume]])])]),(0,s.Lk)("audio",{ref:"audioPlayer",src:a.audioSrc,onTimeupdate:e[7]||(e[7]=(...t)=>l.updateTime&&l.updateTime(...t)),onLoadedmetadata:e[8]||(e[8]=(...t)=>l.updateDuration&&l.updateDuration(...t)),onLoadeddata:e[9]||(e[9]=(...t)=>l.onLoadedData&&l.onLoadedData(...t)),onPlay:e[10]||(e[10]=(...t)=>l.onPlay&&l.onPlay(...t)),onError:e[11]||(e[11]=(...t)=>l.handleError&&l.handleError(...t))}," Your browser does not support the audio element. ",40,M)])}var N={props:["audioSrc","metadata"],data(){return{albumCover:"https://pbs.twimg.com/media/FPx0VtLX0AcOSK3.jpg:large",isPlaying:!1,isShuffle:!1,isRepeat:!1,seek:0,currentTime:"0:00",duration:"2:07",volume:100,isLoaded:!1}},watch:{audioSrc(t){if(t){const t=this.$refs.audioPlayer;this.isLoaded=!1,t.pause(),t.load()}}},methods:{togglePlay(){const t=this.$refs.audioPlayer;t.paused&&this.isLoaded?(t.play(),this.isPlaying=!0):(t.pause(),this.isPlaying=!1)},toggleShuffle(){this.isShuffle=!this.isShuffle},toggleRepeat(){this.isRepeat=!this.isRepeat},onPlay(){this.isLoaded=!0,this.isPlaying=!0},onLoadedData(){this.isLoaded=!0,this.$refs.audioPlayer.play(),this.isPlaying=!0},updateTime(){const t=this.$refs.audioPlayer;t&&(this.currentTime=this.formatTime(t.currentTime),this.seek=t.currentTime/t.duration*100)},updateDuration(){const t=this.$refs.audioPlayer;t&&(this.duration=this.formatTime(t.duration))},formatTime(t){const e=Math.floor(t/60),a=Math.floor(t%60);return`${e}:${a<10?"0":""}${a}`},seekAudio(){const t=this.$refs.audioPlayer;t&&(t.currentTime=this.seek/100*t.duration)},changeVolume(){const t=this.$refs.audioPlayer;t&&(t.volume=this.volume/100)},handleError(t){console.error("Error loading audio:",t)}}};const R=(0,A.A)(N,[["render",j]]);var x=R;const F=t=>((0,s.Qi)("data-v-55c38df3"),t=t(),(0,s.jt)(),t),K={key:0,class:"playlist-popup"},Q={class:"playlist-header"},B=F((()=>(0,s.Lk)("h3",null,"Playlist Manager",-1))),Y={class:"playlist-body"},J=["onClick"];function W(t,e,a,o,r,l){const u=(0,s.g2)("draggable");return(0,s.uX)(),(0,s.CE)(s.FK,null,[o.isOpen?((0,s.uX)(),(0,s.CE)("div",K,[(0,s.Lk)("div",Q,[B,(0,s.Lk)("button",{onClick:e[0]||(e[0]=t=>o.isOpen=!1)},"X")]),(0,s.Lk)("div",Y,[(0,s.bF)(u,{modelValue:o.playlist,"onUpdate:modelValue":e[1]||(e[1]=t=>o.playlist=t),onEnd:o.onDragEnd,tag:"ul"},{item:(0,s.k6)((({element:t,index:e})=>[((0,s.uX)(),(0,s.CE)("li",{key:e,class:"list-item"},[(0,s.eW)((0,n.v_)(t)+" ",1),(0,s.Lk)("button",{onClick:t=>o.removeItem(e)},"Remove",8,J)]))])),_:1},8,["modelValue","onEnd"]),(0,s.bo)((0,s.Lk)("input",{"onUpdate:modelValue":e[2]||(e[2]=t=>o.newItem=t),placeholder:"Add new item"},null,512),[[i.Jo,o.newItem]]),(0,s.Lk)("button",{onClick:e[3]||(e[3]=(...t)=>o.addItem&&o.addItem(...t))},"Add")])])):(0,s.Q3)("",!0),o.isOpen?(0,s.Q3)("",!0):((0,s.uX)(),(0,s.CE)("button",{key:1,class:"open-popup-button",onClick:e[4]||(e[4]=t=>o.isOpen=!0)}," Open Playlist Manager "))],64)}var q=a(144),z=a(1527),G=a.n(z),Z={components:{draggable:G()},setup(){const t=(0,q.KR)(!1),e=(0,q.KR)(""),a=(0,q.KR)([]),i=()=>{e.value.trim()&&(a.value.push(e.value.trim()),e.value="")},s=t=>{a.value.splice(t,1)},n=()=>{};return{isOpen:t,newItem:e,playlist:a,addItem:i,removeItem:s,onDragEnd:n}}};const tt=(0,A.A)(Z,[["render",W],["__scopeId","data-v-55c38df3"]]);var et=tt,at=a(7910),it={components:{NavSidebar:S,AudioPlayer:x,PlaylistUI:et},data(){return{songs:[],currentView:"songs",displayItems:[],navigationHistory:[],socket:null,audioSrc:"",metadata:{title:"Unknown Title",artist:"Unknown Artist",album:"Unknown Album",year:"Unknown Year"}}},computed:{isSongView(){return"songs"===this.currentView||"all"===this.currentView}},methods:{async fetchSongs(){try{const t=await fetch("http://localhost:5000/songs"),e=await t.json();this.songs=e.songs.map((t=>{const e=t.path.split("/"),a=t.name.replace(/(\.m4a|\.mp3|\.flac)+$/i,"");return{...t,name:a,artist:e[e.length-2]||"Unknown Artist",album:e[e.length-1]||"Unknown Album",path:t.path}})),this.displayAllSongs()}catch(t){console.error("Error fetching songs:",t)}},buildDirectoryStructure(){const t={};return this.songs.forEach((e=>{const a=e.path.split("/");let i=t;a.forEach(((t,e)=>{i[t]||(i[t]={name:t,path:a.slice(0,e+1).join("/"),isDirectory:!0,children:{}}),i=i[t].children}))})),t},traverseDirectory(t,e=""){if(!t)return[];const a=Object.values(t);return e&&this.updateNavigationHistory({view:"Directory",name:e}),a},displayDirectory(t=""){this.currentView="directory";const e=this.buildDirectoryStructure();let a=e;if(t){const e=t.split("/");e.forEach((t=>{a[t]&&(a=a[t].children)}))}this.displayItems=this.traverseDirectory(a,t)},playSong(t){this.$notify("Attempting to play song: "+t),this.socket.emit("play_song",{index:t})},handlePlaySong(t){this.audioSrc=`http://localhost:5000/stream?url=${encodeURIComponent(t.url)}`,this.fetchMetadata(this.audioSrc)},async fetchMetadata(t){try{const e=await fetch(t,{method:"HEAD"});this.metadata.title=e.headers.get("X-Metadata-Title")||"Unknown Title",this.metadata.artist=e.headers.get("X-Metadata-Artist")||"Unknown Artist",this.metadata.album=e.headers.get("X-Metadata-Album")||"Unknown Album",this.metadata.year=e.headers.get("X-Metadata-Year")||"Unknown Year"}catch(e){console.error("Error fetching metadata:",e)}},displayAlbums(){this.currentView="albums";const t=[...new Set(this.songs.map((t=>t.album)))];this.displayItems=t.map((t=>({name:t}))),this.updateNavigationHistory({view:"Albums"})},displaySongs(t){this.currentView="songs",this.displayItems=this.songs.filter((e=>e.album===t)),this.updateNavigationHistory({view:"Songs",name:t})},displayAllSongs(){this.currentView="all",this.displayItems=this.songs.map(((t,e)=>({...t,index:e}))),this.updateNavigationHistory({view:"All Songs"})},displayArtists(){this.currentView="artists";const t=[...new Set(this.songs.map((t=>t.artist)))];this.displayItems=t.map((t=>({name:t}))),this.updateNavigationHistory({view:"Artists"})},displayArtistAlbums(t){this.currentView="albums";const e=[...new Set(this.songs.filter((e=>e.artist===t)).map((t=>t.album)))];this.displayItems=e.map((t=>({name:t}))),this.updateNavigationHistory({view:"Albums",name:t})},handleNavigation(t){t.isDirectory?this.displayDirectory(t.path):"albums"===this.currentView?this.displaySongs(t.name):"songs"===this.currentView||"all"===this.currentView?this.playSong(t.index):"artists"===this.currentView&&this.displayArtistAlbums(t.name)},goBack(){if(this.navigationHistory.length>1){this.navigationHistory.pop();const t=this.navigationHistory[this.navigationHistory.length-1];this.restoreView(t.view,t.name)}},restoreView(t,e){switch(t){case"All Songs":this.displayAllSongs();break;case"Artists":this.displayArtists();break;case"Albums":e?this.displayArtistAlbums(e):this.displayAlbums();break;case"Songs":e&&(this.currentView="songs",this.displayItems=this.songs.filter((t=>t.album===e)));break;case"Directory":this.displayDirectory(e);break}},navigate(t){this.navigationHistory=[],"All"===t?this.displayAllSongs():"Artists"===t?this.displayArtists():"Albums"===t?this.displayAlbums():"Directory"===t&&this.displayDirectory()},navigateToBreadcrumb(t){this.navigationHistory=this.navigationHistory.slice(0,t+1);const e=this.navigationHistory[t];this.restoreView(e.view,e.name)},updateNavigationHistory(t){0!==this.navigationHistory.length&&this.navigationHistory[this.navigationHistory.length-1].view===t.view&&this.navigationHistory[this.navigationHistory.length-1].name===t.name||this.navigationHistory.push(t)},getIconClass(t,e){if(e)return"fas fa-folder";switch(t){case"albums":return"fas fa-folder";case"artists":return"fas fa-microphone";case"songs":case"all":return"fas fa-music";default:return"fas fa-music"}}},mounted(){this.socket=at.Ay.connect("http://localhost:5000"),this.socket.on("connect",(()=>{console.log("Connected to server")})),this.socket.on("play_song",this.handlePlaySong),this.fetchSongs()}};const st=(0,A.A)(it,[["render",y]]);var nt=st,ot=a(7278);const rt=(0,i.Ef)(nt);rt.use(ot.Ay),rt.mount("#app")}},e={};function a(i){var s=e[i];if(void 0!==s)return s.exports;var n=e[i]={exports:{}};return t[i].call(n.exports,n,n.exports,a),n.exports}a.m=t,function(){var t=[];a.O=function(e,i,s,n){if(!i){var o=1/0;for(c=0;c<t.length;c++){i=t[c][0],s=t[c][1],n=t[c][2];for(var r=!0,l=0;l<i.length;l++)(!1&n||o>=n)&&Object.keys(a.O).every((function(t){return a.O[t](i[l])}))?i.splice(l--,1):(r=!1,n<o&&(o=n));if(r){t.splice(c--,1);var u=s();void 0!==u&&(e=u)}}return e}n=n||0;for(var c=t.length;c>0&&t[c-1][2]>n;c--)t[c]=t[c-1];t[c]=[i,s,n]}}(),function(){a.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return a.d(e,{a:e}),e}}(),function(){a.d=function(t,e){for(var i in e)a.o(e,i)&&!a.o(t,i)&&Object.defineProperty(t,i,{enumerable:!0,get:e[i]})}}(),function(){a.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"===typeof window)return window}}()}(),function(){a.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)}}(),function(){a.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})}}(),function(){var t={524:0};a.O.j=function(e){return 0===t[e]};var e=function(e,i){var s,n,o=i[0],r=i[1],l=i[2],u=0;if(o.some((function(e){return 0!==t[e]}))){for(s in r)a.o(r,s)&&(a.m[s]=r[s]);if(l)var c=l(a)}for(e&&e(i);u<o.length;u++)n=o[u],a.o(t,n)&&t[n]&&t[n][0](),t[n]=0;return a.O(c)},i=self["webpackChunkmusic_streamer"]=self["webpackChunkmusic_streamer"]||[];i.forEach(e.bind(null,0)),i.push=e.bind(null,i.push.bind(i))}();var i=a.O(void 0,[504],(function(){return a(3584)}));i=a.O(i)})();
//# sourceMappingURL=..\static\app.js.map